---
import Section from './Section.astro';

// Secara dinamis mengimpor semua gambar dari direktori /src/data/galleri/
// Ini akan mengambil file .jpeg, .jpg, .png, dan .webp
const images = import.meta.glob('../data/galeri/*.{jpeg,jpg,png,webp}', { eager: true });
console.log(images);

// Membuat array galleryImages dari gambar yang diimpor
const galleryImages = Object.entries(images).map(([path, module]) => {
    // Membuat teks alt deskriptif dari nama file
    const filename = path.split('/').pop().split('.')[0];
    const altText = `Foto galeri ${filename.replace(/[-_]/g, ' ')}`;
    
    return {
        src: module.default.src,
        alt: altText,
    };
});
---
<Section id="galeri">
    <div class="flex flex-col w-full text-center items-center">
        <h2 class="text-3xl md:text-4xl font-bold">Galeri Foto</h2>
        <p class="mt-4 max-w-2xl text-lg text-gray-600">
            Lihat momen-momen indah yang tertangkap di desa kami, dari pemandangan alam hingga keceriaan pengunjung.
        </p>
        
        <div class="mt-12 w-full overflow-x-auto pb-4 simple-scrollbar">
            <div class="flex gap-6">
                {galleryImages.map((image) => (
                    <div class="w-80 md:w-96 flex-shrink-0">
                        <div class="group relative overflow-hidden rounded-2xl shadow-lg transition-all duration-300 ease-in-out cursor-pointer">
                            <img 
                                src={image.src} 
                                alt={image.alt} 
                                class="w-full h-96 object-cover scale-100 group-hover:scale-110 transition-transform duration-500" 
                                loading="lazy"
                                onerror="this.onerror=null;this.src='https://placehold.co/384x384/f87171/ffffff?text=Image+Error';"
                            />
                            <div class="absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center p-4">
                                <p class="text-white text-center text-sm md:text-base">{image.alt}</p>
                            </div>
                        </div>
                    </div>
                ))}
            </div>
        </div>
    </div>
</Section>

<style>
/* Gaya scrollbar yang bersih dan sederhana */
.simple-scrollbar::-webkit-scrollbar {
    height: 8px;
}
.simple-scrollbar::-webkit-scrollbar-track {
    background: #e5e7eb; /* bg-gray-200 */
    border-radius: 10px;
}
.simple-scrollbar::-webkit-scrollbar-thumb {
    background: #9ca3af; /* bg-gray-400 */
    border-radius: 10px;
}
.simple-scrollbar::-webkit-scrollbar-thumb:hover {
    background: #6b7280; /* bg-gray-500 */
}
</style>

